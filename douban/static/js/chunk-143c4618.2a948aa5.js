(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-143c4618"],{"9b9c":function(t,e,s){},a632:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"movie-details"},[s("fixed-top",{attrs:{titleName:t.titleName}},[s("router-link",{staticClass:"link",attrs:{to:"/"}},[t._v("首页")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.commentsData,expression:"commentsData"}],staticClass:"wrap-w"},[s("cube-scroll",{ref:"scroll2",attrs:{data:t.commentsData,options:t.scrollOptions},on:{"pulling-up":t.pullingUp}},[s("ul",{staticClass:"comments-d-uls"},t._l(t.commentsData,function(e,a){return s("li",{key:e.id,on:{click:function(s){return t.gotoDetails(e.id,a)}}},[s("div",{staticClass:"comments-d-list"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.author,expression:"item.author"}],staticClass:"left"},[s("img",{attrs:{src:e.author.avatar,alt:""}})]),s("div",{staticClass:"right"},[s("div",{staticClass:"name-w"},[s("div",{staticClass:"name-left"},[s("span",[t._v(t._s(e.author.name))]),s("span",[t._v(t._s(e.created_at))]),e.rating?s("span",[t._v(t._s(e.rating.value)+"分")]):t._e()]),s("span",[t._v(t._s(e.useful_count)+"❥")])]),s("p",[t._v(t._s(e.author.signature))]),s("p",{staticClass:"text title"},[t._v(t._s(e.title))]),s("p",{staticClass:"text",domProps:{innerHTML:t._s(t.replaceString(e.summary))}}),s("p",{directives:[{name:"show",rawName:"v-show",value:0===Number(t.$route.query.index),expression:"Number($route.query.index) === 0"}],staticClass:"text mheight"},[t._v(t._s(e.content))])])])])}),0)])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.commentsData.length,expression:"!commentsData.length"}],staticClass:"loading-w"},[s("cube-loading"),s("p",{staticClass:"text"},[t._v("正在加载中...")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.nodata,expression:"nodata"}],staticClass:"loading-w"},[s("p",{staticClass:"text"},[t._v("————————  我是有底线的  ————————")])])],1)},n=[],i=(s("a481"),s("ac6a"),s("c5f6"),{data:function(){return{nodata:!1,scrollOptions:{directionLockThreshold:0,pullUpLoad:!0},pageStart:0,pageCount:20,currentIndex:0,movieData:{},commentsData:[],titleName:""}},created:function(){this.$route.query.id&&(1===Number(this.$route.query.index)?(this.titleName="电影长评",this.getReviews()):(this.titleName="电影短评",this.getDetails()))},methods:{getDetails:function(){var t=this;this.$fetch("/subject/"+this.$route.query.id+"/comments",{start:this.pageStart,count:this.pageCount}).then(function(e){e.comments&&(t.commentsData=e.comments,e.comments.length<t.pageCount&&(t.scrollOptions.pullUpLoad=!1,t.nodata=!0))})},getReviews:function(){var t=this;this.$fetch("/subject/"+this.$route.query.id+"/reviews",{start:this.pageStart,count:this.pageCount}).then(function(e){e.reviews&&(t.commentsData=e.reviews,e.reviews.length<t.pageCount&&(t.scrollOptions.pullUpLoad=!1,t.nodata=!0))})},pullingUp:function(){var t=this;this.pageStart+=this.pageCount,1===Number(this.$route.query.index)?this.$fetch("/subject/"+this.$route.query.id+"/reviews",{start:this.pageStart,count:this.pageCount}).then(function(e){e.reviews&&(t.commentsData=t.commentsData.concat(e.reviews),t.$refs.scroll2.forceUpdate(),e.reviews.length<t.pageCount&&(t.scrollOptions.pullUpLoad=!1,t.nodata=!0))}):this.$fetch("/subject/"+this.$route.query.id+"/comments",{start:this.pageStart,count:this.pageCount}).then(function(e){e.comments&&(t.commentsData=t.commentsData.concat(e.comments),t.$refs.scroll2.forceUpdate(),e.comments.length<t.pageCount&&(t.scrollOptions.pullUpLoad=!1,t.nodata=!0))})},getGenres:function(t){if(t&&t.length)return t.join(" / ")},getGenres2:function(t){if(t&&t.length){var e=[];return t.forEach(function(t){""!==t&&e.push(t)}),e.join(" / ")}},gotoDetails:function(t,e){this.$router.push({path:"/commentDetails",query:{id:this.$route.query.id,mid:t,mindex:e,index:this.$route.query.index}})},tableOne:function(t){this.currentIndex=t},replaceString:function(t){if(t)return t.replace(/\n/g,"<br>")}},components:{fixedTop:function(t){return s.e("chunk-3eea379a").then(function(){var e=[s("a2a2")];t.apply(null,e)}.bind(this)).catch(s.oe)}}}),o=i,r=(s("bd6d"),s("2877")),c=Object(r["a"])(o,a,n,!1,null,"66dbd2c1",null);e["default"]=c.exports},bd6d:function(t,e,s){"use strict";var a=s("9b9c"),n=s.n(a);n.a}}]);